<title>Office Management</title>
<#include "../common/common.html"/>

<div class="row">
	<div class="col-xs-12">
		<div class="row">
			<div class="col-xs-12">
				<form id="_form" />
				<div>
					<div class="dataTables_wrapper form-inline no-footer">
						<table id="_table" class="table table-striped table-bordered table-hover dataTable no-footer">
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<script type="text/javascript">
	$('.page-content-area').ace_ajax('loadScripts', scripts, function() {
		jQuery(function($) {
			// List
			var $table = $("#_table").table({
				url : "${request.contextPath}/admin/office/list",
				formId : "_form",
				tools : [
					{text : 'Add', clazz : 'btn-info', icon : 'fa fa-plus-circle blue', permission : '/admin/office/edit', handler : function(){
							$.aceRedirect("${request.contextPath}/admin/office/edit");
						}},
					{text : 'Disable', clazz : 'btn-warning', icon : 'fa fa-lock orange', permission : '/admin/office/enable', handler : function(){
							$table.ajaxEnable({url : "${request.contextPath}/admin/office/enable"}, false);
						}},
					{text : 'Enable', clazz : 'btn-success', icon : 'fa fa-unlock green', permission : '/admin/office/enable', handler : function(){
							$table.ajaxEnable({url : "${request.contextPath}/admin/office/enable"}, true);
						}},
					{text : 'Delete', clazz : 'btn-danger', icon : 'fa fa-trash-o red', permission : '/admin/office/delete', handler : function(){
							$table.ajaxDelete({url : "${request.contextPath}/admin/office/delete"});
						}}
				],
				columns : [
					{field:'id', hide : true},
					{field:'isEnable', hide : true},
					{field:'name', title:'Name', align:'left'},
					{field:'sort', title:'Sort Order', mobileHide : true},
					{field:'isEnableStr', title:'Enabled', replace : function (d){
							if(d.isEnable)
								return "<span class='label label-sm label-success'>Yes</span>";
							else
								return "<span class='label label-sm label-warning'>No</span>";
						}}
				],
				operate : [
					{text : 'Edit', clazz : 'blue', icon : 'fa fa-pencil', permission : '/admin/office/edit', handler : function(d, i){
							$.aceRedirect("${request.contextPath}/admin/office/edit?id=" + d.id);
						}},
					{text : 'Disable', clazz : 'orange', icon : 'fa fa-lock', permission : '/admin/office/enable',
						handler : function(){
							$table.ajaxEnable({url : "${request.contextPath}/admin/office/enable"}, false);
						},
						show : function(d){
							return d.isEnable;
						}
					},
					{text : 'Enable', clazz : 'green', icon : 'fa fa-unlock', permission : '/admin/office/enable',
						handler : function(){
							$table.ajaxEnable({url : "${request.contextPath}/admin/office/enable"}, true);
						},
						show : function(d){
							return !d.isEnable;
						}
					},
					{text : 'Delete', clazz : 'red', icon : 'fa fa-trash-o', permission : '/admin/office/delete', handler : function(d, i){
							$table.ajaxDelete({url : "${request.contextPath}/admin/office/delete"});
						}}
				],
				after : function(){
					// Permission handling
					$.permission();
				},
				pagination : {hide : true}
			});
		});
	});
</script>