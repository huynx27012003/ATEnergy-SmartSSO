<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<meta charset="utf-8" />
	<title>Smart-SSO Login Page</title>

	<meta name="description" content="User Login Page" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
	<!-- Favicon -->
	<link rel="icon" type="image/png" href="${request.contextPath}/static/assets/img/logo.png">
	<link rel="shortcut icon" type="image/png" href="${request.contextPath}/static/assets/img/logo.png">

	<style>
		/* Popup-friendly minimal layout when query has popup=true */
		/* Make both popup and normal login pages white */
		.login-layout { background-color: #fff !important; }
		.login-layout.popup { background-color: #fff !important; }
		.login-layout.popup .center,
		.login-layout.popup .navbar-fixed-top { display: none !important; }
		.login-layout.popup .login-container { margin-top: 15px; }
		.login-layout.popup .main-container { padding-top: 0; }

		/* Small logo used inside header */
		.login-logo { height: 20px; width: 20px; margin-right: 8px; vertical-align: text-bottom; }

		/* Big circular logo on top */
		.top-logo { text-align: center; margin: 6px 0 14px; }
		.top-logo-img {
			/* Outer circle size */
			width: 80px; height: 80px;
			border-radius: 50%;
			/* Make inner image a bit smaller to fit nicely */
			padding: 6px;
			box-sizing: border-box;
			object-fit: contain; /* ensure full logo visible */
			background: #fff;
			border: 3px solid #e6e6e6;
			box-shadow: 0 2px 6px rgba(0,0,0,0.08);
		}

		/* Make the widget/form container pure white */
		.login-layout .widget-box .widget-main { background: #ffffff !important; }
		.login-layout .widget-box { background-color: transparent !important; }

		/* Bold title and primary button color */
		.login-title { font-weight: 500;
						text-align: center;
 						 width: 100% !important; }
		.login-layout .btn-primary,
		.login-layout .btn-primary:active,
		.login-layout .btn-primary.active,
		.login-layout .open > .dropdown-toggle.btn-primary {
			background-color: #012596 !important;
			border-color: #012596 !important;
			color: #ffffff !important;
		}
		.login-layout .btn-primary:hover,
		.login-layout .btn-primary:focus {
			background-color: #001e7a !important; /* slightly darker */
			border-color: #001e7a !important;
			color: #ffffff !important;
		}

		/* Powered by label under the logo */
		.powered-by { text-align:center; color:#012596; font-size:12px; margin: 4px 0 10px; }
	</style>

	<script type="text/javascript">
		var url = window.location.href;
		if (url.indexOf('/sso/login') == -1) {
			// Preserve existing query string so popup=true, clientId, redirectUri remain
			var qs = window.location.search || '';
			window.location.href = '${request.contextPath}/sso/login' + qs;
		}
	</script>

	<!-- bootstrap & fontawesome -->
	<link rel="stylesheet" href="${request.contextPath}/static/assets/css/bootstrap.css" />
	<link rel="stylesheet" href="${request.contextPath}/static/assets/css/font-awesome.css" />

	<!-- text fonts -->
	<link rel="stylesheet" href="${request.contextPath}/static/assets/css/ace-fonts.css" />

	<!-- ace styles -->
	<link rel="stylesheet" href="${request.contextPath}/static/assets/css/ace.css" />

	<!--[if lte IE 9]>
	<link rel="stylesheet" href="${request.contextPath}/static/assets/css/ace-part2.css" />
	<![endif]-->
	<link rel="stylesheet" href="${request.contextPath}/static/assets/css/ace-rtl.css" />

	<!--[if lte IE 9]>
	<link rel="stylesheet" href="${request.contextPath}/static/assets/css/ace-ie.css" />
	<![endif]-->

	<!--[if lt IE 9]>
	<script src="${request.contextPath}/static/assets/js/html5shiv.js"></script>
	<script src="${request.contextPath}/static/assets/js/respond.js"></script>
	<![endif]-->
</head>

<body class="login-layout">
<script>
	(function () {
		if (window.location.search.indexOf('popup=true') !== -1) {
			document.addEventListener('DOMContentLoaded', function () {
				try { document.body.classList.add('popup'); } catch (e) { }
			});
		}
	})();
</script>
<div class="main-container">
	<div class="main-content">
		<div class="row">
			<div class="col-sm-10 col-sm-offset-1">
				<div class="login-container">
					<div class="center">
						<!-- <h1>
							ATEnergy Smart-SSO
						</h1> -->
					</div>



					<div class="space-6"></div>

					<div class="position-relative">
						<div id="login-box" class="login-box visible widget-box no-border">
							<div class="widget-body">
								<div class="widget-main">
									<!-- Top circular logo -->
									<div class="top-logo">
										<img class="top-logo-img" src="${request.contextPath}/static/assets/img/logo.png" alt="Logo" />
									</div>
									<h5 class="powered-by">Empowered by ATEnergy</h5>
									<h4 class="header blue lighter bigger login-title">Login to continue</h4>

									<div class="space-6"></div>

									<form id="_loginForm" action="${request.contextPath}/sso/login" method="post"
										  validate="true" vmessage="false">
										<input type="hidden" name="redirectUri" value="${redirectUri}" />
										<input type="hidden" name="clientId" value="${clientId}" />
										<fieldset>
											<label class="block clearfix form-group">
													<span class="block input-icon input-icon-right help-validate">
														<input id="_username" name="username" value="admin" type="text" class="form-control form-data" placeholder="Username"
															   required="true" minlength='4'/>
														<i class="ace-icon fa fa-user"></i>
													</span>
											</label>

											<label class="block clearfix form-group">
													<span class="block input-icon input-icon-right help-validate">
														<input id="_password" name="password" value="123456" type="password" class="form-control form-data" placeholder="Password"
															   required="true" minlength='6' maxlength='16'/>
														<i class="ace-icon fa fa-lock"></i>
													</span>
											</label>

											<div class="space"></div>

											<div class="clearfix">
												<label class="inline">
													<input id="_rememberMe" type="checkbox" class="ace" checked=""/>
													<span class="lbl"> Remember me</span>
												</label>

												<button id="_loginButton" type="button" class="width-35 pull-right btn btn-sm btn-primary">
													<i class="ace-icon fa fa-key"></i>
													<span class="bigger-110">Login</span>
												</button>
											</div>

											<div class="space-4"></div>
										</fieldset>
									</form>
								</div><!-- /.widget-main -->
							</div><!-- /.widget-body -->
						</div><!-- /.login-box -->
					</div><!-- /.position-relative -->

					<div class="navbar-fixed-top align-right">
						<br />
						&nbsp;
						<a id="btn-login-dark" href="#">Light</a>
						&nbsp;
						<span class="blue">/</span>
						&nbsp;
						<a id="btn-login-blur" href="#">Dark</a>
						&nbsp;
						<span class="blue">/</span>
						&nbsp;
						<a id="btn-login-light" href="#">Blur</a>
						&nbsp; &nbsp; &nbsp;
					</div>
				</div>
			</div><!-- /.col -->
		</div><!-- /.row -->
	</div><!-- /.main-content -->
</div><!-- /.main-container -->

<!-- basic scripts -->
<!--[if !IE]> -->
<script type="text/javascript">
	window.jQuery || document.write("<script src='${request.contextPath}/static/assets/js/jquery.js'>"+"<"+"/script>");
</script>
<!--[endif]-->

<!--[if IE]>
<script type="text/javascript">
	window.jQuery || document.write("<script src='${request.contextPath}/static/assets/js/jquery1x.js'>"+"<"+"/script>");
</script>
<![endif]-->

<script type="text/javascript">
	if('ontouchstart' in document.documentElement)
		document.write("<script src='${request.contextPath}/static/assets/js/jquery.mobile.custom.js'>"+"<"+"/script>");
</script>

<script type="text/javascript" src="${request.contextPath}/static/custom/jquery.cookie.js"></script>
<script type="text/javascript" src="${request.contextPath}/static/custom/jquery.form.min.js"></script>
<script type="text/javascript" src="${request.contextPath}/static/custom/jquery.validate-2.0.min.js"></script>
<script type="text/javascript" src="${request.contextPath}/static/custom/jquery.validate-2.0.custom.min.js"></script>

<!-- inline scripts -->
<script type="text/javascript">
	jQuery(function($) {

		// Display error message if present
		var fail = '${errorMessage!}';
		if(fail != null && fail != ''){
			alert(fail);
		}

		// Autofocus convenience
		$("#_captcha").focus();

		/*
        // Example of using cookie to remember username
        if($.cookie('_username') != undefined){
            $("#_username").val($.cookie('_username'));
            $("#_password").focus();
            $("#_rememberMe").attr("checked", true);
        } else {
            $("#_username").focus();
            $("#_rememberMe").attr("checked", false);
        }
        */

		// Theme switchers
		$('#btn-login-dark').on('click', function(e) {
			$('body').attr('class', 'login-layout');
			$('#id-text2').attr('class', 'white');
			$('#id-company-text').attr('class', 'blue');
			e.preventDefault();
		});
		$('#btn-login-light').on('click', function(e) {
			$('body').attr('class', 'login-layout light-login');
			$('#id-text2').attr('class', 'grey');
			$('#id-company-text').attr('class', 'blue');
			e.preventDefault();
		});
		$('#btn-login-blur').on('click', function(e) {
			$('body').attr('class', 'login-layout blur-login');
			$('#id-text2').attr('class', 'white');
			$('#id-company-text').attr('class', 'light-blue');
			e.preventDefault();
		});

		// Login button
		$("#_loginButton").click(function() {
			if($('#_loginForm').validate()){

				if($('#_rememberMe:checked').length > 0){
					$.cookie('_username', $("#_username").val());
				}
				else{
					$.removeCookie('_username');
				}

				$('#_loginForm').submit();
			}
		});

		// Press Enter to submit
		$(".form-data").bind('keypress', function(event) {
			if(event.keyCode == "13"){
				event.preventDefault();
				$("#_loginButton").click();
			}
		});
	});
</script>
</body>
</html>
